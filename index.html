<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI‚ÄìAR Sustainable Khon Mask Lab | ‡∏™‡∏≤‡∏ô‡∏®‡∏¥‡∏•‡∏õ‡πå ‡∏ñ‡∏¥‡πà‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤</title>

  <!-- A-Frame + MindAR (‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏°‡∏≠) -->
  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.1/dist/mindar-face-aframe.prod.js"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Noto+Serif+Thai:wght@300;400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;700&family=Kanit:wght@300;500;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --gold: #C9922A; --gl: #F5C842; --red: #8B1A1A;
      --blk: #0A0806; --cream: #F7F0E0; --glass: rgba(255,255,255,0.05);
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background:var(--blk); color:var(--cream);
      font-family:'Noto Serif Thai',serif; overflow-x:hidden; line-height:1.6;
      display:flex; flex-direction:column; align-items:center;
    }

    /* ‚îÄ‚îÄ Nav ‚îÄ‚îÄ */
    .tnav {
      position:fixed; top:0; width:100%; padding:1rem 5%; z-index:1000;
      display:flex; justify-content:space-between; align-items:center;
      background:rgba(10,8,6,0.95); border-bottom:1px solid rgba(201,146,42,0.2);
      backdrop-filter:blur(10px);
    }
    .n-logo { font-family:'Cinzel Decorative',cursive; color:var(--gold); font-size:1.2rem; }
    .n-links { display:flex; gap:20px; }
    .n-link { color:var(--gold); text-decoration:none; font-size:0.85rem; cursor:pointer; transition:0.3s; }
    .n-link:hover { color:var(--gl); }

    /* ‚îÄ‚îÄ Pages ‚îÄ‚îÄ */
    .page {
      display:none; width:100%; min-height:100vh;
      padding:120px 10% 60px; opacity:0; transition:opacity 0.5s ease;
      flex-direction:column; align-items:center; text-align:center;
    }
    .page.active { display:flex; opacity:1; }

    h1,h2 { font-family:'Cinzel Decorative',cursive; color:var(--gold); margin-bottom:1.5rem; width:100%; }
    .sub-t { font-size:0.9rem; color:var(--gl); margin-bottom:2rem; letter-spacing:1px; width:100%; }

    /* ‚îÄ‚îÄ Cards / Buttons ‚îÄ‚îÄ */
    .img-container {
      width:100%; max-width:450px; margin:0 auto 2rem;
      border-radius:15px; overflow:hidden; border:2px solid var(--gold);
      box-shadow:0 10px 40px rgba(201,146,42,0.2);
    }
    .img-container img { width:100%; display:block; transition:0.6s; }
    .img-container:hover img { transform:scale(1.05); }
    .card {
      background:var(--glass); border:1px solid rgba(201,146,42,0.15);
      padding:2rem; border-radius:15px; transition:0.4s; backdrop-filter:blur(5px);
    }
    .btn-wrap { display:flex; width:100%; justify-content:center; margin-top:3rem; gap:20px; }
    .btn-gold {
      padding:12px 40px; background:linear-gradient(135deg,var(--gold),#8A641A);
      border:none; color:#000; font-weight:900; border-radius:50px; cursor:pointer; transition:0.3s;
    }
    .btn-gold:hover { transform:scale(1.1); box-shadow:0 0 20px var(--gold); }

    /* ‚îÄ‚îÄ AR Scene Container (‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å .page ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ MindAR init ‡πÑ‡∏î‡πâ) ‚îÄ‚îÄ */
    #ar-scene-wrapper {
      position:fixed;
      /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ display:none ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ MindAR init ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ */
      width:1px; height:1px; overflow:hidden;
      opacity:0; pointer-events:none;
      top:0; left:0; z-index:-1;
    }
    #ar-scene-wrapper.ar-visible {
      position:absolute;
      width:100%; height:100%;
      top:0; left:0; z-index:1;
      opacity:1; pointer-events:all;
    }

    /* ‚îÄ‚îÄ P4 AR Viewport ‚îÄ‚îÄ */
    #ar-viewport {
      position:relative; width:100%; max-width:560px;
      aspect-ratio:3/4; border-radius:28px; overflow:hidden;
      border:2px solid var(--gold); box-shadow:0 0 60px rgba(201,146,42,0.25);
      background:#111; margin:0 auto;
    }

    /* ‚îÄ‚îÄ Mask Selector Buttons ‚îÄ‚îÄ */
    .mask-sel-btn {
      padding:8px 18px;
      background:rgba(255,255,255,0.05);
      border:1px solid rgba(201,146,42,0.3);
      color:var(--cream); border-radius:50px;
      cursor:pointer; font-size:0.8rem;
      font-family:'Noto Serif Thai',serif; transition:all 0.25s;
    }
    .mask-sel-btn:hover { border-color:var(--gold); color:var(--gold); }
    .mask-sel-btn.active-sel {
      background:linear-gradient(135deg,var(--gold),#8A641A);
      border-color:var(--gold); color:#000; font-weight:700;
      box-shadow:0 0 16px rgba(201,146,42,0.4);
    }

    /* ‚îÄ‚îÄ Bubble Wall ‚îÄ‚îÄ */
    .bubble-photo {
      position:absolute; border-radius:50%;
      border:4px solid #c5a059; object-fit:cover;
      animation:floatBubble var(--duration) ease-in-out infinite;
      box-shadow:0 10px 30px rgba(197,160,89,0.4);
    }
    @keyframes floatBubble {
      0%,100% { transform:translateY(0) translateX(0) rotate(0deg); }
      33%      { transform:translateY(-30px) translateX(15px) rotate(5deg); }
      66%      { transform:translateY(15px) translateX(-15px) rotate(-5deg); }
    }

    /* ‚îÄ‚îÄ p2 styles ‚îÄ‚îÄ */
    .studio-bg { background:#0a0a0a; }
    .canvas-area {
      background:radial-gradient(circle,#222 0%,#000 100%);
      box-shadow:inset 0 0 100px rgba(0,0,0,0.8); border:1px solid #333;
    }
    .sidebar-right {
      border-left:1px solid #c5a05933;
      background:rgba(15,15,15,0.95); backdrop-filter:blur(10px);
    }
    .color-input-wrapper {
      position:relative; width:38px; height:38px; overflow:hidden;
      border-radius:10px; border:2px solid #333; transition:all 0.2s;
    }
    .color-input-wrapper:hover { border-color:#c5a059; transform:scale(1.05); }
    .color-input-wrapper input {
      position:absolute; top:-50%; left:-50%; width:200%; height:200%; cursor:pointer;
    }
    .custom-scrollbar::-webkit-scrollbar { width:5px; }
    .custom-scrollbar::-webkit-scrollbar-track { background:#0a0a0a; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background:#c5a059; border-radius:10px; }
    .active-btn {
      background:#c5a059 !important; color:#000 !important;
      font-weight:bold; box-shadow:0 0 15px rgba(197,160,89,0.3);
    }
  </style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  A-SCENE ‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å .page ‡∏ó‡∏∏‡∏Å‡∏™‡πà‡∏ß‡∏ô
  ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡πÉ‡∏´‡πâ MindAR init ‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ï‡∏≠‡∏ô load
  ‡πÇ‡∏î‡∏¢‡∏ã‡πà‡∏≠‡∏ô‡∏î‡πâ‡∏ß‡∏¢ visibility ‡πÅ‡∏ó‡∏ô display:none
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="ar-scene-wrapper">
  <a-scene
    id="ar-scene"
    mindar-face="autoStart: false; uiLoading: no; uiScanning: no; uiError: no"
    embedded
    color-space="sRGB"
    renderer="colorManagement: true; alpha: true"
    vr-mode-ui="enabled: false"
    device-orientation-permission-ui="enabled: false"
    style="width:100%;height:100%;"
  >
    <a-assets timeout="30000">
      <a-asset-item id="model-giant"  src="giant.glb"></a-asset-item>
      <a-asset-item id="model-monkey" src="monkey.glb"></a-asset-item>
      <a-asset-item id="model-human"  src="human.glb"></a-asset-item>
      <a-asset-item id="model-nang"   src="nang.glb"></a-asset-item>
      <a-asset-item id="model-rishi"  src="rishi.glb"></a-asset-item>
    </a-assets>

    <a-camera active="false" position="0 0 0" look-controls="enabled:false"></a-camera>

    <a-entity mindar-face-target="anchorIndex: 168">
      <a-gltf-model
        id="ar-khon-mask"
        src="#model-giant"
        position="0 -0.3 0.1"
        scale="0.45 0.45 0.45"
        animation-mixer
      ></a-gltf-model>
    </a-entity>
  </a-scene>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NAV ‚ïê‚ïê‚ïê‚ïê -->
<nav class="tnav">
  <div class="n-logo">KHON LAB</div>
  <div class="n-links">
    <span class="n-link" onclick="showPage('p0')">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span>
    <span class="n-link" onclick="showPage('p1')">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÇ‡∏Ç‡∏ô</span>
    <span class="n-link" onclick="showPage('p2')">AI ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö</span>
    <span class="n-link" onclick="showPage('p4')">AR Experience</span>
  </div>
</nav>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê P0 ‚ïê‚ïê‚ïê‚ïê -->
<section id="p0" class="page active">
  <h1 style="font-size:2.5rem;">THE ROYAL CONNECTION</h1>
  <div class="sub-t">‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à‡∏û‡∏£‡∏∞‡∏û‡∏±‡∏ô‡∏õ‡∏µ‡∏´‡∏•‡∏ß‡∏á‡∏Å‡∏±‡∏ö‡∏°‡∏£‡∏î‡∏Å‡πÇ‡∏Ç‡∏ô‡πÑ‡∏ó‡∏¢</div>
  <div class="img-container">
    <img src="queen.webp" alt="‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à‡∏û‡∏£‡∏∞‡∏û‡∏±‡∏ô‡∏õ‡∏µ‡∏´‡∏•‡∏ß‡∏á">
  </div>
  <div class="card" style="max-width:800px; cursor:default;">
    <p>‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à‡∏û‡∏£‡∏∞‡∏ô‡∏≤‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏™‡∏¥‡∏£‡∏¥‡∏Å‡∏¥‡∏ï‡∏¥‡πå ‡∏û‡∏£‡∏∞‡∏ö‡∏£‡∏°‡∏£‡∏≤‡∏ä‡∏¥‡∏ô‡∏µ‡∏ô‡∏≤‡∏ñ ‡∏û‡∏£‡∏∞‡∏ö‡∏£‡∏°‡∏£‡∏≤‡∏ä‡∏ä‡∏ô‡∏ô‡∏µ‡∏û‡∏±‡∏ô‡∏õ‡∏µ‡∏´‡∏•‡∏ß‡∏á<br>
    ‡∏ó‡∏£‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏≠‡∏∏‡∏õ‡∏ñ‡∏±‡∏°‡∏†‡πå‡πÅ‡∏•‡∏∞‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏Ç‡∏ô‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏£‡∏∏‡πà‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏á</p>
  </div>
  <div class="btn-wrap">
    <button class="btn-gold" onclick="showPage('p1')">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏°‡∏£‡∏î‡∏Å‡πÑ‡∏ó‡∏¢</button>
  </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê P1 ‚ïê‚ïê‚ïê‚ïê -->
<section id="p1" class="page">
  <h1 style="font-size:2.5rem;">KNOWLEDGE HUB</h1>
  <div class="sub-t">‡∏°‡∏£‡∏î‡∏Å‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏ä‡∏≤‡∏ï‡∏¥ (UNESCO)</div>

  <div style="max-width:900px; text-align:left; background:rgba(255,255,255,0.03); padding:40px; border-radius:20px; border:1px solid rgba(201,146,42,0.2);">
    <h2 style="text-align:left; color:var(--gl); font-family:'Noto Serif Thai'; font-weight:700; border-left:5px solid var(--gold); padding-left:15px; margin-bottom:20px;">‡πÇ‡∏Ç‡∏ô‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏ó‡∏≤‡∏ô</h2>
    <img src="https://raw.githubusercontent.com/TiTle-GS/Khon-Mask-Lab/main/khon-3.jpg" alt="‡πÇ‡∏Ç‡∏ô" style="width:100%;border-radius:10px;margin-bottom:20px;">

    <div style="font-size:1.1rem; line-height:2; color:var(--cream);">
      <p style="margin-bottom:20px; text-indent:2em;">
        ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢ <strong>"‡πÇ‡∏Ç‡∏ô"</strong> ‡πÄ‡∏õ‡πá‡∏ô‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏ó‡∏¢‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏≠‡∏°‡∏£‡∏ß‡∏°‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡∏Ç‡∏≠‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏Ç‡∏ô‡∏á ‡∏ô‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏ß‡∏£‡∏£‡∏ì‡∏Å‡∏£‡∏£‡∏° ‡∏ß‡∏£‡∏£‡∏ì‡∏®‡∏¥‡∏•‡∏õ‡πå ‡∏ô‡∏≤‡∏è‡∏®‡∏¥‡∏•‡∏õ‡πå ‡∏Ñ‡∏µ‡∏ï‡∏®‡∏¥‡∏•‡∏õ‡πå ‡∏´‡∏±‡∏ï‡∏ñ‡∏®‡∏¥‡∏•‡∏õ‡πå ‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏™‡∏ï‡∏£‡∏≤‡∏†‡∏£‡∏ì‡πå‡∏≠‡∏±‡∏ô‡∏á‡∏î‡∏á‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏â‡∏ö‡∏±‡∏ö‡πÇ‡∏ö‡∏£‡∏≤‡∏ì ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏â‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏á ‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‡∏ó‡∏µ‡πà‡∏¢‡∏¥‡πà‡∏á‡πÉ‡∏´‡∏ç‡πà
      </p>
      <p style="margin-bottom:20px; text-indent:2em;">
        ‡πÇ‡∏Ç‡∏ô‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏ó‡∏≤‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô‡∏õ‡∏µ ‡∏û.‡∏®. ‡πí‡πï‡πï‡πê ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡πå ‡∏ï‡∏≠‡∏ô‡∏û‡∏£‡∏´‡∏°‡∏≤‡∏® ‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏£‡πÄ‡∏•‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ï‡πÇ‡∏î‡∏¢‡∏ß‡∏á‡πÇ‡∏¢‡∏ò‡∏ß‡∏≤‡∏ó‡∏¥‡∏ï ‡∏Å‡∏≠‡∏á‡∏î‡∏∏‡∏£‡∏¥‡∏¢‡∏≤‡∏á‡∏Ñ‡πå‡∏Å‡∏≠‡∏á‡∏ó‡∏±‡∏û‡∏ö‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏â‡∏•‡∏¥‡∏°‡∏â‡∏•‡∏≠‡∏á‡∏û‡∏£‡∏∞‡∏ö‡∏≤‡∏ó‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à‡∏û‡∏£‡∏∞‡∏ö‡∏£‡∏°‡∏ä‡∏ô‡∏Å‡∏≤‡∏ò‡∏¥‡πÄ‡∏ö‡∏®‡∏£ ‡∏°‡∏´‡∏≤‡∏†‡∏π‡∏°‡∏¥‡∏û‡∏•‡∏≠‡∏î‡∏∏‡∏•‡∏¢‡πÄ‡∏î‡∏ä‡∏°‡∏´‡∏≤‡∏£‡∏≤‡∏ä ‡∏ö‡∏£‡∏°‡∏ô‡∏≤‡∏ñ‡∏ö‡∏û‡∏¥‡∏ï‡∏£ ‡∏ó‡∏£‡∏á‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏û‡∏£‡∏∞‡∏ä‡∏ô‡∏°‡∏û‡∏£‡∏£‡∏©‡∏≤ ‡πò‡πê ‡∏û‡∏£‡∏£‡∏©‡∏≤
      </p>
      <div class="card" style="background:rgba(201,146,42,0.1); border:1px solid var(--gold); margin:30px 0;">
        <h3 style="color:var(--gl); margin-bottom:10px;">UNESCO</h3>
        <p style="font-size:1rem;">
          ‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏¢‡∏π‡πÄ‡∏ô‡∏™‡πÇ‡∏Å‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô <strong>"‡πÇ‡∏Ç‡∏ô"</strong>‡∏Ç‡∏≠‡∏á‡πÑ‡∏ó‡∏¢ ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô‡∏°‡∏£‡∏î‡∏Å‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏ä‡∏≤‡∏ï‡∏¥ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ‡πí‡πô ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô ‡πí‡πï‡πñ‡πë
        </p>
      </div>
    </div>

    <div class="btn-wrap">
      <button class="btn-gold" onclick="showPage('p0')">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
      <button class="btn-gold" onclick="showPage('p2')">‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ AI ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö ‚Üí</button>
    </div>
  </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê P2 ‚ïê‚ïê‚ïê‚ïê -->
<section id="p2" class="page" style="padding:80px 0 0; overflow:hidden;">
  <main class="flex-1 flex flex-col lg:flex-row w-full" style="height:calc(100vh - 80px);">

    <!-- Canvas Area -->
    <div class="flex-1 flex flex-col items-center justify-center p-6 md:p-12 relative">
      <div id="capture-area" class="canvas-area h-[70vh] lg:h-[80%] aspect-square rounded-[2.5rem] flex items-center justify-center relative shadow-2xl overflow-hidden border border-zinc-800">
        <svg id="main-svg" viewBox="0 0 400 400" class="w-full h-full drop-shadow-[0_35px_60px_rgba(0,0,0,0.8)]">
          <path d="M140 85 L260 85 L255 135 L145 135 Z" fill="rgba(0,0,0,0.4)" transform="translate(8,8)"/>
          <g id="crown-group">
            <path id="part-crown-top"     d="M200 10 L215 85 L185 85 Z" fill="#FFD700"/>
            <circle id="part-crown-ornament" cx="200" cy="50" r="4" fill="#FFD700" stroke="#000" stroke-width="0.5"/>
            <path id="part-crown-base"    d="M140 80 L260 80 L250 130 L150 130 Z" fill="#FFD700" stroke="#b08d4a" stroke-width="1"/>
          </g>
          <path id="part-face"  d="M120 130 C120 130 100 180 100 240 C100 320 160 360 200 360 C240 360 300 320 300 240 C300 180 280 130 280 130 L120 130" fill="#16a34a"/>
          <path id="part-ear-l" d="M100 200 C80 200 70 240 90 260 Q100 240 100 220" fill="#16a34a"/>
          <path id="part-ear-r" d="M300 200 C320 200 330 240 310 260 Q300 240 300 220" fill="#16a34a"/>
          <g id="details-layer">
            <g id="patterns-container" fill="none" stroke-width="1.5" stroke-linecap="round">
              <g id="pattern-basic" class="hidden">
                <path d="M130 260 Q150 270 150 290"/><path d="M270 260 Q250 270 250 290"/><path d="M190 350 Q200 330 210 350"/>
              </g>
              <g id="pattern-kanok" class="hidden">
                <path d="M120 240 Q140 230 150 250 T160 270"/><path d="M280 240 Q260 230 250 250 T240 270"/>
                <path d="M180 150 Q200 140 220 150"/><path d="M195 160 Q200 155 205 160"/>
              </g>
              <g id="pattern-royal" class="hidden">
                <path d="M110 230 Q130 210 160 240 T180 280"/><path d="M290 230 Q270 210 240 240 T220 280"/>
                <path d="M200 140 L200 180 M185 160 L215 160"/>
                <circle cx="200" cy="160" r="3" fill="currentColor"/>
                <path d="M85 220 Q75 220 80 240"/><path d="M315 220 Q325 220 320 240"/>
              </g>
            </g>
            <g id="eye-group">
              <path id="part-eye-l" d="M140 215 Q165 195 190 215" fill="white" stroke="black" stroke-width="1.5"/>
              <path id="part-eye-r" d="M210 215 Q235 195 260 215" fill="white" stroke="black" stroke-width="1.5"/>
              <circle id="pupil-l" cx="165" cy="212" r="6" fill="black"/>
              <circle id="pupil-r" cx="235" cy="212" r="6" fill="black"/>
            </g>
            <path id="part-eyebrow-l" d="M135 200 Q165 160 190 205" fill="none" stroke="#000" stroke-width="3" stroke-linecap="round"/>
            <path id="part-eyebrow-r" d="M210 205 Q235 160 265 200" fill="none" stroke="#000" stroke-width="3" stroke-linecap="round"/>
            <path id="part-mouth"  d="M170 300 Q200 330 230 300" fill="none" stroke="black" stroke-width="2.5"/>
            <path id="part-fang-l" d="M175 305 L170 325 L185 310 Z" fill="white" stroke="black" stroke-width="0.5"/>
            <path id="part-fang-r" d="M225 305 L230 325 L215 310 Z" fill="white" stroke="black" stroke-width="0.5"/>
            <circle id="part-gem"  cx="200" cy="105" r="7" fill="#dc2626" stroke="#fff" stroke-width="1"/>
          </g>
        </svg>
      </div>
      <div class="flex md:hidden mt-8 gap-3 w-full max-w-sm">
        <button onclick="randomizeAll()" class="flex-1 py-3 bg-zinc-800 rounded-xl text-xs font-bold border border-zinc-700">‡∏™‡∏∏‡πà‡∏°‡∏™‡∏µ</button>
        <button onclick="exportMask()"   class="flex-1 py-3 bg-[#c5a059] text-black rounded-xl text-xs font-bold shadow-lg">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ</button>
      </div>
    </div>

    <!-- Sidebar -->
    <aside class="w-full lg:w-[400px] sidebar-right custom-scrollbar overflow-y-auto p-8" style="height:100%;">
      <div class="hidden md:flex items-center gap-6 justify-end">
        <button onclick="randomizeAll()" class="text-sm text-zinc-400 hover:text-[#c5a059] transition-colors flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/></svg>
          ‡∏™‡∏∏‡πà‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö
        </button>
        <button onclick="exportMask()" class="bg-[#c5a059] text-black px-6 py-2 rounded-full text-sm font-bold hover:bg-[#b08d4a] transition-all shadow-lg active:scale-95">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</button>
      </div>

      <h2 class="text-[#c5a059] font-bold text-xl mb-6 mt-4 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
        ‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö
      </h2>

      <div class="space-y-8">
        <section>
          <label class="text-[10px] text-zinc-500 uppercase tracking-[0.2em] font-bold block mb-4">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£</label>
          <div class="grid grid-cols-3 gap-2">
            <button onclick="updateState({char:'giant'})"  id="btn-giant"  class="char-btn p-3 bg-zinc-800/50 border border-zinc-800 rounded-xl text-xs hover:border-[#c5a059] transition-all">‡∏¢‡∏±‡∏Å‡∏©‡πå</button>
            <button onclick="updateState({char:'monkey'})" id="btn-monkey" class="char-btn p-3 bg-zinc-800/50 border border-zinc-800 rounded-xl text-xs hover:border-[#c5a059] transition-all">‡∏•‡∏¥‡∏á</button>
            <button onclick="updateState({char:'human'})"  id="btn-human"  class="char-btn p-3 bg-zinc-800/50 border border-zinc-800 rounded-xl text-xs hover:border-[#c5a059] transition-all">‡πÄ‡∏ó‡∏ß‡∏î‡∏≤</button>
            <button onclick="updateState({char:'nang'})"   id="btn-nang"   class="char-btn p-3 bg-zinc-800/50 border border-zinc-800 rounded-xl text-xs hover:border-[#c5a059] transition-all">‡∏ï‡∏±‡∏ß‡∏ô‡∏≤‡∏á</button>
            <button onclick="updateState({char:'rishi'})"  id="btn-rishi"  class="char-btn p-3 bg-zinc-800/50 border border-zinc-800 rounded-xl text-xs hover:border-[#c5a059] transition-all">‡∏§‡πÖ‡∏©‡∏µ</button>
          </div>
        </section>
        <section>
          <label class="text-[10px] text-zinc-500 uppercase tracking-[0.2em] font-bold block mb-4">‡∏•‡∏ß‡∏î‡∏•‡∏≤‡∏¢‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤</label>
          <div class="grid grid-cols-2 gap-2">
            <button onclick="updateState({pattern:'none'})"  id="pat-none"  class="pat-btn p-2 bg-zinc-800 rounded-lg text-[10px]">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏•‡∏≤‡∏¢</button>
            <button onclick="updateState({pattern:'basic'})" id="pat-basic" class="pat-btn p-2 bg-zinc-800 rounded-lg text-[10px]">‡∏•‡∏≤‡∏¢‡πÄ‡∏™‡πâ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</button>
            <button onclick="updateState({pattern:'kanok'})" id="pat-kanok" class="pat-btn p-2 bg-zinc-800 rounded-lg text-[10px]">‡∏•‡∏≤‡∏¢‡∏Å‡∏ô‡∏Å‡πÅ‡∏Å‡πâ‡∏°</button>
            <button onclick="updateState({pattern:'royal'})" id="pat-royal" class="pat-btn p-2 bg-zinc-800 rounded-lg text-[10px]">‡∏•‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏π‡∏á</button>
          </div>
        </section>
        <section>
          <label class="text-[10px] text-zinc-500 uppercase tracking-[0.2em] font-bold block mb-4">‡∏£‡∏π‡∏õ‡∏ó‡∏£‡∏á‡∏°‡∏á‡∏Å‡∏∏‡∏é‡πÅ‡∏•‡∏∞‡∏î‡∏ß‡∏á‡∏ï‡∏≤</label>
          <div class="grid grid-cols-1 gap-4">
            <div class="bg-zinc-900/40 p-3 rounded-xl border border-zinc-800">
              <p class="text-[10px] text-zinc-500 mb-2">‡∏°‡∏á‡∏Å‡∏∏‡∏é (Crown)</p>
              <div class="flex gap-2">
                <button onclick="updateState({crown:'spike'})" id="crown-spike" class="flex-1 py-2 bg-zinc-800 rounded-lg text-[10px]">‡∏¢‡∏≠‡∏î‡πÅ‡∏´‡∏•‡∏°</button>
                <button onclick="updateState({crown:'round'})" id="crown-round" class="flex-1 py-2 bg-zinc-800 rounded-lg text-[10px]">‡∏¢‡∏≠‡∏î‡∏ö‡∏≤‡∏¢‡∏®‡∏£‡∏µ</button>
                <button onclick="updateState({crown:'none'})"  id="crown-none"  class="flex-1 py-2 bg-zinc-800 rounded-lg text-[10px]">‡πÑ‡∏°‡πà‡∏°‡∏µ</button>
              </div>
            </div>
            <div class="bg-zinc-900/40 p-3 rounded-xl border border-zinc-800">
              <p class="text-[10px] text-zinc-500 mb-2">‡∏î‡∏ß‡∏á‡∏ï‡∏≤ (Eyes)</p>
              <div class="flex gap-2">
                <button onclick="updateState({eye:'normal'})" id="eye-normal" class="flex-1 py-2 bg-zinc-800 rounded-lg text-[10px]">‡∏ï‡∏≤‡∏à‡∏£‡∏∞‡πÄ‡∏Ç‡πâ</button>
                <button onclick="updateState({eye:'wide'})"   id="eye-wide"   class="flex-1 py-2 bg-zinc-800 rounded-lg text-[10px]">‡∏ï‡∏≤‡πÇ‡∏û‡∏•‡∏á</button>
              </div>
            </div>
          </div>
        </section>
        <section>
          <label class="text-[10px] text-zinc-500 uppercase tracking-[0.2em] font-bold block mb-4">‡∏û‡∏≤‡πÄ‡∏•‡∏ó‡∏™‡∏µ</label>
          <div class="grid grid-cols-1 gap-3">
            <div class="flex items-center justify-between bg-zinc-800/30 p-3 rounded-xl border border-zinc-800">
              <span class="text-xs text-[#c5a059]">‡∏™‡∏µ‡∏´‡∏ô‡πâ‡∏≤ (Skin)</span>
              <div class="color-input-wrapper"><input type="color" id="c-skin" oninput="applyColors()"></div>
            </div>
            <div class="flex items-center justify-between bg-zinc-800/30 p-3 rounded-xl border border-zinc-800">
              <span class="text-xs text-[#c5a059]">‡∏™‡∏µ‡∏•‡∏ß‡∏î‡∏•‡∏≤‡∏¢ (Pattern)</span>
              <div class="color-input-wrapper"><input type="color" id="c-line" oninput="applyColors()"></div>
            </div>
            <div class="flex items-center justify-between bg-zinc-800/30 p-3 rounded-xl border border-zinc-800">
              <span class="text-xs text-[#c5a059]">‡∏™‡∏µ‡∏°‡∏á‡∏Å‡∏∏‡∏é (Gold)</span>
              <div class="color-input-wrapper"><input type="color" id="c-crown" oninput="applyColors()"></div>
            </div>
            <div class="flex items-center justify-between bg-zinc-800/30 p-3 rounded-xl border border-zinc-800">
              <span class="text-xs text-[#c5a059]">‡∏≠‡∏±‡∏ç‡∏°‡∏ì‡∏µ (Gem)</span>
              <div class="color-input-wrapper"><input type="color" id="c-gem" oninput="applyColors()"></div>
            </div>
          </div>
        </section>
      </div>
    </aside>
  </main>

  <!-- Modal -->
  <div id="modal" class="fixed inset-0 bg-black/90 flex items-center justify-center opacity-0 pointer-events-none transition-all z-50 px-4">
    <div class="bg-zinc-900 border-2 border-[#c5a059] p-8 md:p-12 rounded-[2rem] text-center max-w-sm">
      <div class="w-20 h-20 bg-[#c5a059] text-black rounded-full flex items-center justify-center mx-auto mb-6 shadow-[0_0_30px_rgba(197,160,89,0.5)]">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
      </div>
      <h2 class="text-2xl font-bold mb-4 text-[#c5a059]">‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h2>
      <button onclick="closeModal()" class="w-full py-4 bg-[#c5a059] text-black font-black rounded-2xl hover:bg-white hover:text-black transition-all shadow-xl uppercase tracking-widest text-xs">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</button>
    </div>
  </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê P4 ‚ïê‚ïê‚ïê‚ïê -->
<section id="p4" class="page">
  <h1 style="font-size:2.2rem;">AR EXPERIENCE</h1>
  <div class="sub-t">‡∏™‡∏ß‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å‡πÇ‡∏Ç‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤ ¬∑ Face Tracking Technology</div>

  <!-- Viewport: ‡πÅ‡∏™‡∏î‡∏á‡∏†‡∏≤‡∏û‡∏Å‡∏•‡πâ‡∏≠‡∏á + ‡πÇ‡∏°‡πÄ‡∏î‡∏• AR -->
  <div id="ar-viewport">
    <!-- video + canvas ‡∏à‡∏≤‡∏Å a-scene ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å clone ‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
    <canvas id="ar-display-canvas" style="width:100%;height:100%;display:block;object-fit:cover;"></canvas>

    <!-- ‡πÄ‡∏™‡πâ‡∏ô‡πÑ‡∏Å‡∏î‡πå -->
    <div id="face-guide" style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;">
      <svg width="200" height="260" viewBox="0 0 200 260" fill="none" style="opacity:0.35;transition:opacity 0.5s;">
        <ellipse cx="100" cy="130" rx="72" ry="95" stroke="#c9922a" stroke-width="1.5" stroke-dasharray="6 4"/>
        <path d="M28 60 L28 40 L48 40"    stroke="#c9922a" stroke-width="2" stroke-linecap="round"/>
        <path d="M172 60 L172 40 L152 40" stroke="#c9922a" stroke-width="2" stroke-linecap="round"/>
        <path d="M28 200 L28 220 L48 220" stroke="#c9922a" stroke-width="2" stroke-linecap="round"/>
        <path d="M172 200 L172 220 L152 220" stroke="#c9922a" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </div>

    <!-- Flash -->
    <div id="flash-effect" style="position:absolute;inset:0;background:#fff;opacity:0;pointer-events:none;transition:opacity 0.08s;z-index:5;"></div>

    <!-- Status -->
    <div id="ar-status" style="position:absolute;top:14px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.8);border:1px solid var(--gold);color:var(--gold);font-size:0.7rem;letter-spacing:0.1em;padding:5px 16px;border-radius:20px;white-space:nowrap;backdrop-filter:blur(6px);z-index:10;">
      ‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...
    </div>
  </div>

  <!-- Mask Selector -->
  <div style="display:flex;gap:12px;margin-top:20px;flex-wrap:wrap;justify-content:center;max-width:560px;">
    <button onclick="changeARMask('giant')"  id="sel-giant"  class="mask-sel-btn active-sel">üë∫ ‡∏¢‡∏±‡∏Å‡∏©‡πå</button>
    <button onclick="changeARMask('monkey')" id="sel-monkey" class="mask-sel-btn">üêí ‡∏•‡∏¥‡∏á</button>
    <button onclick="changeARMask('human')"  id="sel-human"  class="mask-sel-btn">üåü ‡πÄ‡∏ó‡∏ß‡∏î‡∏≤</button>
    <button onclick="changeARMask('nang')"   id="sel-nang"   class="mask-sel-btn">üå∏ ‡∏ô‡∏≤‡∏á</button>
    <button onclick="changeARMask('rishi')"  id="sel-rishi"  class="mask-sel-btn">üî± ‡∏§‡πÖ‡∏©‡∏µ</button>
  </div>

  <!-- Sliders -->
  <div style="max-width:560px;width:100%;background:rgba(255,255,255,0.03);border:1px solid rgba(201,146,42,0.2);border-radius:16px;padding:18px 22px;margin-top:16px;">
    <p style="color:var(--gl);font-size:0.75rem;letter-spacing:0.15em;margin-bottom:14px;">üîß ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å</p>
    <div style="display:grid;gap:10px;">
      <label style="font-size:0.75rem;color:var(--cream);display:flex;align-items:center;gap:10px;">
        <span style="width:70px;color:var(--gold);">‡∏Ç‡∏ô‡∏≤‡∏î</span>
        <input type="range" id="sl-scale" min="0.1" max="1.5" step="0.01" value="0.45" oninput="tuneMask()" style="flex:1;accent-color:var(--gold);">
        <span id="lbl-scale" style="width:38px;text-align:right;">0.45</span>
      </label>
      <label style="font-size:0.75rem;color:var(--cream);display:flex;align-items:center;gap:10px;">
        <span style="width:70px;color:var(--gold);">‡∏Ç‡∏∂‡πâ‡∏ô/‡∏•‡∏á</span>
        <input type="range" id="sl-y" min="-1.5" max="1.5" step="0.01" value="-0.3" oninput="tuneMask()" style="flex:1;accent-color:var(--gold);">
        <span id="lbl-y" style="width:38px;text-align:right;">-0.30</span>
      </label>
      <label style="font-size:0.75rem;color:var(--cream);display:flex;align-items:center;gap:10px;">
        <span style="width:70px;color:var(--gold);">‡∏´‡∏ô‡πâ‡∏≤/‡∏´‡∏•‡∏±‡∏á</span>
        <input type="range" id="sl-z" min="-0.5" max="0.8" step="0.01" value="0.1" oninput="tuneMask()" style="flex:1;accent-color:var(--gold);">
        <span id="lbl-z" style="width:38px;text-align:right;">0.10</span>
      </label>
    </div>
  </div>

  <!-- Buttons -->
  <div class="btn-wrap" style="margin-top:24px;gap:16px;flex-wrap:wrap;">
    <button id="start-ar-btn"   onclick="startAR()"        class="btn-gold">üì∑ ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á AR</button>
    <button id="capture-ar-btn" onclick="captureARPhoto()"  class="btn-gold" style="display:none;background:linear-gradient(135deg,#fff,#ddd);color:#000;">‚¨§ ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ</button>
    <button id="stop-ar-btn"    onclick="stopAR()"          class="btn-gold" style="display:none;background:rgba(80,20,20,0.8);color:#fcc;">‚úï ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
  </div>
  <p style="color:rgba(255,255,255,0.25);font-size:0.72rem;margin-top:14px;">* ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô Chrome / Safari ‡πÅ‡∏•‡∏∞‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á</p>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê P5 ‚ïê‚ïê‚ïê‚ïê -->
<section id="p5" class="page">
  <h1>BUBBLE WALL</h1>
  <div class="sub-t">‡∏Ñ‡∏•‡∏±‡∏á‡∏†‡∏≤‡∏û‡∏°‡∏£‡∏î‡∏Å‡πÑ‡∏ó‡∏¢‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡∏à‡∏≤‡∏Å‡∏ù‡∏µ‡∏°‡∏∑‡∏≠‡∏Ñ‡∏∏‡∏ì</div>
  <div id="bubble-container" style="position:relative;width:100%;height:65vh;background:rgba(9,9,11,0.5);border-radius:3rem;border:1px solid #27272a;overflow:hidden;">
    <div id="empty-msg" style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;color:#71717a;">
      ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢... ‡∏•‡∏≠‡∏á‡πÑ‡∏õ‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ AR Experience ‡∏™‡∏¥!
    </div>
  </div>
  <div class="btn-wrap">
    <button class="btn-gold" onclick="showPage('p4')">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ AR</button>
    <button class="btn-gold" onclick="clearBubbles()" style="background:#444;color:#ccc;">‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</button>
  </div>
</section>


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCRIPTS ‚ïê‚ïê‚ïê‚ïê -->
<script>
/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   SHARED STATE
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
const capturedImages = [];

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   PAGE NAVIGATION (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  window.scrollTo(0, 0);
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   P2 ‚Äî SVG MASK DESIGNER
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
const state = {
  char:'giant', eye:'normal', crown:'spike', pattern:'none',
  colors:{ skin:'#16a34a', line:'#064e3b', crown:'#FFD700', gem:'#dc2626' }
};
const presets = {
  giant:  { skin:'#16a34a', line:'#064e3b', crown:'#FFD700', gem:'#dc2626', eye:'wide',   crownStyle:'spike', pattern:'basic' },
  monkey: { skin:'#ffffff', line:'#cbd5e1', crown:'#FFD700', gem:'#3b82f6', eye:'normal', crownStyle:'round', pattern:'none'  },
  human:  { skin:'#16a34a', line:'#052e16', crown:'#FFD700', gem:'#dc2626', eye:'normal', crownStyle:'spike', pattern:'kanok' },
  nang:   { skin:'#fef3c7', line:'#d97706', crown:'#FFD700', gem:'#ec4899', eye:'normal', crownStyle:'spike', pattern:'royal' },
  rishi:  { skin:'#f97316', line:'#7c2d12', crown:'#7c2d12', gem:'#ffffff', eye:'normal', crownStyle:'round', pattern:'basic' }
};
function updateState(u) {
  if (u.char) {
    state.char = u.char;
    const p = presets[state.char];
    state.colors = { skin:p.skin, line:p.line, crown:p.crown, gem:p.gem };
    state.eye = p.eye; state.crown = p.crownStyle; state.pattern = p.pattern;
    syncInputs();
  }
  if (u.eye)     state.eye = u.eye;
  if (u.crown)   state.crown = u.crown;
  if (u.pattern) state.pattern = u.pattern;
  render();
}
function syncInputs() {
  document.getElementById('c-skin').value  = state.colors.skin;
  document.getElementById('c-line').value  = state.colors.line;
  document.getElementById('c-crown').value = state.colors.crown;
  document.getElementById('c-gem').value   = state.colors.gem;
}
function applyColors() {
  state.colors.skin  = document.getElementById('c-skin').value;
  state.colors.line  = document.getElementById('c-line').value;
  state.colors.crown = document.getElementById('c-crown').value;
  state.colors.gem   = document.getElementById('c-gem').value;
  render();
}
function render() {
  document.querySelectorAll('.char-btn').forEach(b => b.classList.remove('active-btn'));
  document.getElementById(`btn-${state.char}`).classList.add('active-btn');
  document.querySelectorAll('.pat-btn').forEach(b => b.classList.remove('active-btn','bg-zinc-800'));
  document.getElementById(`pat-${state.pattern}`).classList.add('active-btn');
  document.querySelectorAll('[id^="eye-"]').forEach(b => b.classList.remove('active-btn','bg-zinc-800'));
  document.getElementById(`eye-${state.eye}`).classList.add('active-btn');
  document.querySelectorAll('[id^="crown-"]').forEach(b => b.classList.remove('active-btn','bg-zinc-800'));
  document.getElementById(`crown-${state.crown}`).classList.add('active-btn');

  document.getElementById('part-face').setAttribute('fill', state.colors.skin);
  document.getElementById('part-ear-l').setAttribute('fill', state.colors.skin);
  document.getElementById('part-ear-r').setAttribute('fill', state.colors.skin);
  document.getElementById('part-crown-top').setAttribute('fill', state.colors.crown);
  document.getElementById('part-crown-base').setAttribute('fill', state.colors.crown);
  document.getElementById('part-gem').setAttribute('fill', state.colors.gem);
  const pc = document.getElementById('patterns-container');
  pc.setAttribute('stroke', state.colors.line);
  pc.setAttribute('color',  state.colors.line);

  ['basic','kanok','royal'].forEach(p => {
    document.getElementById(`pattern-${p}`).classList.toggle('hidden', state.pattern !== p);
  });

  const eyeL = document.getElementById('part-eye-l');
  const eyeR = document.getElementById('part-eye-r');
  const pL   = document.getElementById('pupil-l');
  const pR   = document.getElementById('pupil-r');
  if (state.eye === 'wide') {
    eyeL.setAttribute('d','M135 210 Q165 180 190 215 L190 225 Q165 240 135 210 Z');
    eyeR.setAttribute('d','M210 215 Q235 180 265 210 L265 210 Q235 240 210 225 Z');
    pL.setAttribute('r','8'); pR.setAttribute('r','8');
  } else {
    eyeL.setAttribute('d','M140 215 Q165 200 190 215');
    eyeR.setAttribute('d','M210 215 Q235 200 260 215');
    pL.setAttribute('r','5'); pR.setAttribute('r','5');
  }

  const cg = document.getElementById('crown-group');
  const ct = document.getElementById('part-crown-top');
  const co = document.getElementById('part-crown-ornament');
  const gem = document.getElementById('part-gem');
  if (state.crown === 'none') { cg.style.display='none'; gem.style.display='none'; }
  else {
    cg.style.display='block'; gem.style.display='block';
    if (state.crown==='spike') { ct.setAttribute('d','M200 10 L220 85 L180 85 Z'); co.setAttribute('cy','45'); }
    else                       { ct.setAttribute('d','M200 30 Q230 50 200 85 Q170 50 200 30'); co.setAttribute('cy','55'); }
  }
  [document.getElementById('part-fang-l'), document.getElementById('part-fang-r')]
    .forEach(f => f.style.display = state.char==='giant' ? 'block' : 'none');
  document.getElementById('part-mouth').setAttribute('d',
    state.char==='nang' ? 'M180 305 Q200 315 220 305' : 'M170 300 Q200 330 230 300');
}
function randomizeAll() {
  const keys = Object.keys(presets);
  const rnd  = () => '#'+Math.floor(Math.random()*16777215).toString(16).padStart(6,'0');
  updateState({ char:keys[Math.floor(Math.random()*keys.length)], pattern:['none','basic','kanok','royal'][Math.floor(Math.random()*4)] });
  state.colors.skin=rnd(); state.colors.line=rnd(); state.colors.crown=rnd(); state.colors.gem=rnd();
  syncInputs(); render();
}
async function exportMask() {
  const svg = document.getElementById('main-svg');
  const src = new XMLSerializer().serializeToString(svg);
  const canvas = document.createElement('canvas');
  canvas.width = canvas.height = 1200;
  const ctx = canvas.getContext('2d');
  const g = ctx.createRadialGradient(600,600,0,600,600,900);
  g.addColorStop(0,'#1a1a1a'); g.addColorStop(1,'#000');
  ctx.fillStyle=g; ctx.fillRect(0,0,1200,1200);
  const img = new Image();
  img.src = 'data:image/svg+xml;base64,'+btoa(unescape(encodeURIComponent(src)));
  img.onload = () => {
    ctx.drawImage(img,100,100,1000,1000);
    ctx.fillStyle='#c5a059'; ctx.font='bold 36px serif'; ctx.textAlign='center';
    ctx.fillText(`KHON MASK STUDIO: ${state.char.toUpperCase()}`,600,1140);
    const a = document.createElement('a');
    a.download=`khon-mask-${Date.now()}.png`;
    a.href=canvas.toDataURL('image/png'); a.click();
    document.getElementById('modal').classList.remove('opacity-0','pointer-events-none');
  };
}
function closeModal() { document.getElementById('modal').classList.add('opacity-0','pointer-events-none'); }

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   P4 ‚Äî AR FACE TRACKING
   ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏•‡∏±‡∏Å: a-scene ‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å .page ‡∏à‡∏∂‡∏á init ‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥
   ‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ requestAnimationFrame ‡∏ß‡∏≤‡∏î‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å a-scene canvas
   ‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô #ar-display-canvas ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô p4
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
let arRunning   = false;
let arSceneReady = false;
let rafId       = null;

// ‡∏£‡∏≠ a-scene ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
(function waitScene() {
  const scene = document.getElementById('ar-scene');
  if (!scene) return;
  const check = () => {
    if (scene.hasLoaded) {
      arSceneReady = true;
      setStatus('‚úÖ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‚Äî ‡∏Å‡∏î "‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á AR"');
    } else {
      scene.addEventListener('loaded', () => {
        arSceneReady = true;
        setStatus('‚úÖ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‚Äî ‡∏Å‡∏î "‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á AR"');
      }, { once:true });
    }
  };
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', check);
  else check();
})();

function startAR() {
  if (!arSceneReady) {
    setStatus('‚åõ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...');
    setTimeout(startAR, 600);
    return;
  }

  const scene = document.getElementById('ar-scene');
  const sys   = scene.systems && scene.systems['mindar-face-system'];

  if (!sys) {
    setStatus('‚åõ ‡∏£‡∏≠ MindAR system...');
    setTimeout(startAR, 500);
    return;
  }

  navigator.mediaDevices.getUserMedia({ video:{ facingMode:'user' }, audio:false })
    .then(() => {
      sys.start();
      arRunning = true;
      setStatus('üü¢ Face Tracking Active');
      document.querySelector('#face-guide svg').style.opacity = '0';
      document.getElementById('start-ar-btn').style.display   = 'none';
      document.getElementById('capture-ar-btn').style.display = '';
      document.getElementById('stop-ar-btn').style.display    = '';

      // ‡∏ß‡∏≤‡∏î‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å a-scene ‡∏•‡∏á‡πÉ‡∏ô display canvas ‡∏î‡πâ‡∏ß‡∏¢ rAF
      startMirrorLoop();
    })
    .catch(err => {
      console.error('Camera error:', err);
      setStatus('‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ ‚Äî ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï');
    });
}

function startMirrorLoop() {
  const displayCanvas = document.getElementById('ar-display-canvas');
  const ctx = displayCanvas.getContext('2d');

  function loop() {
    if (!arRunning) return;

    const srcCanvas = document.querySelector('#ar-scene canvas');
    if (srcCanvas && srcCanvas.width > 0) {
      displayCanvas.width  = srcCanvas.width;
      displayCanvas.height = srcCanvas.height;
      ctx.drawImage(srcCanvas, 0, 0);
    }
    rafId = requestAnimationFrame(loop);
  }
  loop();
}

function stopAR() {
  const scene = document.getElementById('ar-scene');
  const sys   = scene && scene.systems && scene.systems['mindar-face-system'];
  if (sys && arRunning) sys.stop();
  arRunning = false;
  if (rafId) { cancelAnimationFrame(rafId); rafId = null; }
  setStatus('‚è∏ ‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß');
  document.querySelector('#face-guide svg').style.opacity = '0.35';
  document.getElementById('start-ar-btn').style.display   = '';
  document.getElementById('capture-ar-btn').style.display = 'none';
  document.getElementById('stop-ar-btn').style.display    = 'none';
}

function changeARMask(type) {
  const modelMap = {
    giant:'#model-giant', monkey:'#model-monkey',
    human:'#model-human', nang:'#model-nang', rishi:'#model-rishi'
  };
  const model = document.getElementById('ar-khon-mask');
  if (model && modelMap[type]) model.setAttribute('src', modelMap[type]);
  document.querySelectorAll('.mask-sel-btn').forEach(b => b.classList.remove('active-sel'));
  const btn = document.getElementById('sel-'+type);
  if (btn) btn.classList.add('active-sel');
}

function tuneMask() {
  const model = document.getElementById('ar-khon-mask');
  if (!model) return;
  const s = parseFloat(document.getElementById('sl-scale').value);
  const y = parseFloat(document.getElementById('sl-y').value);
  const z = parseFloat(document.getElementById('sl-z').value);
  model.setAttribute('scale',    `${s} ${s} ${s}`);
  model.setAttribute('position', `0 ${y} ${z}`);
  document.getElementById('lbl-scale').textContent = s.toFixed(2);
  document.getElementById('lbl-y').textContent     = y.toFixed(2);
  document.getElementById('lbl-z').textContent     = z.toFixed(2);
}

function captureARPhoto() {
  const flash = document.getElementById('flash-effect');
  flash.style.opacity = '1';
  setTimeout(() => flash.style.opacity = '0', 100);

  const displayCanvas = document.getElementById('ar-display-canvas');
  if (!displayCanvas || displayCanvas.width === 0) { alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á AR ‡∏Å‡πà‡∏≠‡∏ô'); return; }

  capturedImages.push(displayCanvas.toDataURL('image/png'));
  setTimeout(() => { updateBubbleWall(); showPage('p5'); }, 350);
}

function setStatus(msg) {
  const el = document.getElementById('ar-status');
  if (el) el.textContent = msg;
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   P5 ‚Äî BUBBLE WALL
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function updateBubbleWall() {
  const container = document.getElementById('bubble-container');
  document.getElementById('empty-msg').style.display = 'none';
  const img = document.createElement('img');
  img.src       = capturedImages[capturedImages.length - 1];
  img.className = 'bubble-photo';
  const size = Math.random() * 60 + 100;
  img.style.width    = `${size}px`;
  img.style.height   = `${size}px`;
  img.style.left     = `${Math.random() * (container.clientWidth  - size)}px`;
  img.style.top      = `${Math.random() * (container.clientHeight - size)}px`;
  img.style.setProperty('--duration', `${Math.random() * 3 + 4}s`);
  container.appendChild(img);
}
function clearBubbles() {
  if (!confirm('‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) return;
  capturedImages.length = 0;
  document.querySelectorAll('.bubble-photo').forEach(b => b.remove());
  document.getElementById('empty-msg').style.display = 'flex';
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   INIT
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
window.onload = () => updateState({ char:'giant' });
</script>

</body>
</html>
