<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI‚ÄìAR Sustainable Khon Mask Lab | ‡∏™‡∏≤‡∏ô‡∏®‡∏¥‡∏•‡∏õ‡πå ‡∏ñ‡∏¥‡πà‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤</title>
    <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.1/dist/mindar-face-aframe.prod.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Noto+Serif+Thai:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gold: #C9922A; --red: #8B1A1A; --blk: #0A0806; --cream: #F7F0E0;
            --bubble-gradient: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.4), rgba(201, 146, 42, 0.1) 70%);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--blk); color: var(--cream); font-family: 'Noto Serif Thai', serif; overflow: hidden; }

        /* AR UI */
        #ar-overlay { position: fixed; inset: 0; z-index: 1000; display: none; flex-direction: column; align-items: center; justify-content: space-between; padding: 2rem; background: rgba(0,0,0,0.5); }
        .ar-controls { display: flex; gap: 1rem; margin-bottom: 2rem; }
        .capture-btn { width: 70px; height: 70px; border-radius: 50%; border: 5px solid white; background: var(--red); cursor: pointer; box-shadow: 0 0 15px rgba(0,0,0,0.5); }

        /* Bubble Wall Aesthetic */
        .bubble-wall { position: fixed; inset: 0; z-index: 2000; display: none; background: radial-gradient(circle, #1a1a1a, #000); overflow: hidden; }
        .bubble { 
            position: absolute; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            background: var(--bubble-gradient); backdrop-filter: blur(2px);
            border: 1px solid rgba(255,255,255,0.2); box-shadow: inset -5px -5px 15px rgba(0,0,0,0.2), 0 10px 20px rgba(0,0,0,0.3);
            transition: transform 0.3s ease; cursor: pointer;
        }
        .bubble:hover { transform: scale(1.1); }
        .bubble-img { width: 70%; height: 70%; border-radius: 50%; object-fit: cover; }

        /* Navigation Styles ... (Same as your original) */
        .tnav { position: fixed; top: 0; width: 100%; padding: 1rem; z-index: 500; display: flex; justify-content: space-between; background: rgba(0,0,0,0.8); }
        .start-btn { padding: 1rem 2rem; background: var(--gold); border: none; color: black; font-weight: bold; cursor: pointer; margin-top: 2rem; }
    </style>
</head>
<body>

    <nav class="tnav">
        <div style="color: var(--gold); font-family: 'Cinzel Decorative';">KHON LAB</div>
        <div id="nav-info" style="font-size: 0.8rem;">‡∏™‡∏≤‡∏ô‡∏®‡∏¥‡∏•‡∏õ‡πå ‡∏ñ‡∏¥‡πà‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤</div>
    </nav>

    <section id="p0" style="height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">
        <h1 style="font-family: 'Cinzel Decorative'; font-size: 3rem; color: var(--gold);">AI‚ÄìAR KHON LAB</h1>
        <p style="max-width: 600px; margin-top: 1rem; line-height: 1.8;">
            ‡∏™‡∏∑‡∏ö‡∏™‡∏≤‡∏ô‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏õ‡∏ì‡∏¥‡∏ò‡∏≤‡∏ô‡∏û‡∏£‡∏∞‡∏û‡∏±‡∏ô‡∏õ‡∏µ‡∏´‡∏•‡∏ß‡∏á ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡πÇ‡∏Ç‡∏ô‡∏°‡∏£‡∏î‡∏Å‡πÇ‡∏•‡∏Å‡∏™‡∏π‡πà‡∏¢‡∏∏‡∏Ñ‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•
        </p>
        <button class="start-btn" onclick="openAR()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏ß‡∏°‡∏´‡∏±‡∏ß‡πÇ‡∏Ç‡∏ô AR</button>
    </section>

    <div id="ar-overlay">
        <div style="color: var(--gold); background: rgba(0,0,0,0.7); padding: 0.5rem 1rem; border-radius: 20px;">‡∏™‡πà‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
        <div class="ar-controls">
            <button class="capture-btn" onclick="takeSnapshot()"></button>
            <button onclick="closeAR()" style="background:none; border: 1px solid white; color: white; padding: 0.5rem 1rem; border-radius: 5px;">‡∏õ‡∏¥‡∏î</button>
        </div>
    </div>

    <div id="ar-container" style="display: none; width: 100vw; height: 100vh;">
        <a-scene mindar-face embedded color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
            <a-assets>
                <img id="mask-tos" src="https://cdn-icons-png.flaticon.com/512/1147/1147832.png">
            </a-assets>
            <a-camera active="false" position="0 0 0"></a-camera>
            <a-entity mindar-face-target="anchorIndex: 168">
                <a-image id="ar-mask-view" src="#mask-tos" width="0.9" height="1.1" position="0 0.2 0"></a-image>
            </a-entity>
        </a-scene>
    </div>

    <div id="bubbleWall" class="bubble-wall">
        <div style="position: absolute; top: 20px; width: 100%; text-align: center; color: var(--gold); font-family: 'Cinzel Decorative'; z-index: 2001;">
            MEMORY BUBBLE WALL
            <br><small style="color: white; font-family: 'Noto Serif Thai'; opacity: 0.7;">‡∏†‡∏≤‡∏û‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏™‡∏∑‡∏ö‡∏™‡∏≤‡∏ô‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°</small>
        </div>
        <button onclick="hideBubbleWall()" style="position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 2001; padding: 0.8rem 2rem; background: var(--gold); border: none; border-radius: 30px; font-weight: bold;">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        <div id="bubble-container"></div>
    </div>

    <script>
        const arOverlay = document.getElementById('ar-overlay');
        const arContainer = document.getElementById('ar-container');
        const bubbleWall = document.getElementById('bubbleWall');

        function openAR() {
            arOverlay.style.display = 'flex';
            arContainer.style.display = 'block';
        }

        function closeAR() {
            arOverlay.style.display = 'none';
            arContainer.style.display = 'none';
        }

        function takeSnapshot() {
            // ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏∞‡∏î‡∏∂‡∏á‡πÄ‡∏ü‡∏£‡∏°‡∏à‡∏≤‡∏Å Video Canvas
            alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏û");
            showBubbleWall();
        }

        function showBubbleWall() {
            closeAR();
            bubbleWall.style.display = 'block';
            generateBubbles();
        }

        function hideBubbleWall() {
            bubbleWall.style.display = 'none';
        }

        // Bubble Physics Logic
        function generateBubbles() {
            const container = document.getElementById('bubble-container');
            container.innerHTML = '';
            const count = 15; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ü‡∏≠‡∏á‡∏™‡∏ö‡∏π‡πà‡∏à‡∏≥‡∏•‡∏≠‡∏á
            
            for(let i=0; i<count; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                const size = Math.random() * (120 - 60) + 60;
                bubble.style.width = `${size}px`;
                bubble.style.height = `${size}px`;
                
                // ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
                bubble.style.left = `${Math.random() * 80 + 10}%`;
                bubble.style.top = `${Math.random() * 80 + 10}%`;
                
                // ‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ‡∏à‡∏≥‡∏•‡∏≠‡∏á (‡πÉ‡∏ô‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å Google Drive)
                bubble.innerHTML = `<span style="font-size: 2rem;">üé≠</span>`;
                
                container.appendChild(bubble);
                animateBubble(bubble);
            }
        }

        function animateBubble(el) {
            let posX = parseFloat(el.style.left);
            let posY = parseFloat(el.style.top);
            let velX = (Math.random() - 0.5) * 0.2;
            let velY = (Math.random() - 0.5) * 0.2;

            function move() {
                posX += velX;
                posY += velY;
                
                // ‡∏ö‡∏µ‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏≤‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á (Gravity Effect)
                velX += (50 - posX) * 0.0001;
                velY += (50 - posY) * 0.0001;

                el.style.left = `${posX}%`;
                el.style.top = `${posY}%`;
                requestAnimationFrame(move);
            }
            move();
        }
    </script>
</body>
</html>
