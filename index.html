<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI‚ÄìAR Sustainable Khon Mask Lab</title>
    <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.1/dist/mindar-face-aframe.prod.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Noto+Serif+Thai:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        :root { --gold: #C9922A; --red: #8B1A1A; --blk: #0A0806; --cream: #F7F0E0; }
        * { box-sizing: border-box; }
        body { margin: 0; background: var(--blk); color: var(--cream); font-family: 'Noto Serif Thai', serif; overflow-x: hidden; }
        
        /* Navigation */
        .tnav { position: fixed; top: 0; width: 100%; padding: 1rem; z-index: 1000; display: flex; justify-content: space-between; background: rgba(10,8,6,0.9); border-bottom: 1px solid rgba(201,146,42,0.2); }
        .nav-link { color: var(--gold); text-decoration: none; font-size: 0.8rem; cursor: pointer; margin-left: 15px; }

        /* Page Management */
        .page { display: none; min-height: 100vh; padding-top: 80px; transition: opacity 0.5s; }
        .page.active { display: block; }

        /* Bubble Wall Logic */
        .bubble-wall-bg { position: fixed; inset: 0; z-index: 2000; display: none; background: #000; overflow: hidden; }
        .bubble { 
            position: absolute; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), rgba(201, 146, 42, 0.2));
            box-shadow: 0 8px 15px rgba(0,0,0,0.2); backdrop-filter: blur(4px);
        }
        .bubble img { width: 85%; height: 85%; border-radius: 50%; object-fit: cover; }

        /* UI Elements */
        .btn-gold { padding: 10px 25px; background: var(--gold); border: none; font-weight: bold; cursor: pointer; border-radius: 30px; margin: 10px; }
        .card { background: rgba(201,146,42,0.05); border: 1px solid rgba(201,146,42,0.2); padding: 20px; margin: 15px; border-radius: 10px; }
    </style>
</head>
<body>

    <nav class="tnav">
        <div style="font-family: 'Cinzel Decorative'; color: var(--gold);">KHON LAB</div>
        <div>
            <span class="nav-link" onclick="showPage('p0')">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span>
            <span class="nav-link" onclick="showPage('p1')">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ</span>
            <span class="nav-link" onclick="showPage('p2')">AI ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö</span>
            <span class="nav-link" onclick="showPage('p3')">Zero Waste</span>
            <span class="nav-link" onclick="showPage('p4')">AR ‡∏™‡∏ß‡∏°‡∏´‡∏±‡∏ß‡πÇ‡∏Ç‡∏ô</span>
        </div>
    </nav>

    <section id="p0" class="page active" style="text-align: center;">
        <h1 style="font-family: 'Cinzel Decorative'; color: var(--gold); font-size: 2.5rem;">‡∏û‡∏£‡∏∞‡∏û‡∏±‡∏ô‡∏õ‡∏µ‡∏´‡∏•‡∏ß‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ç‡∏ô</h1>
        <div class="card" style="max-width: 800px; margin: 0 auto;">
            <p>‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à‡∏û‡∏£‡∏∞‡∏ô‡∏≤‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏™‡∏¥‡∏£‡∏¥‡∏Å‡∏¥‡∏ï‡∏¥‡πå ‡∏û‡∏£‡∏∞‡∏ö‡∏£‡∏°‡∏£‡∏≤‡∏ä‡∏¥‡∏ô‡∏µ‡∏ô‡∏≤‡∏ñ ‡∏û‡∏£‡∏∞‡∏ö‡∏£‡∏°‡∏£‡∏≤‡∏ä‡∏ä‡∏ô‡∏ô‡∏µ‡∏û‡∏±‡∏ô‡∏õ‡∏µ‡∏´‡∏•‡∏ß‡∏á ‡∏ó‡∏£‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏≠‡∏∏‡∏õ‡∏ñ‡∏±‡∏°‡∏†‡πå‡πÅ‡∏•‡∏∞‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏Ç‡∏ô‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏£‡∏∏‡πà‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏á</p>
            <p>‡∏ó‡∏£‡∏á‡∏°‡∏µ‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏õ‡∏ì‡∏¥‡∏ò‡∏≤‡∏ô‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏ä‡πà‡∏≤‡∏á‡∏ù‡∏µ‡∏°‡∏∑‡∏≠‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÅ‡∏Å‡πà‡πÄ‡∏¢‡∏≤‡∏ß‡∏ä‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡∏°‡∏£‡∏î‡∏Å‡πÇ‡∏•‡∏Å‡πÉ‡∏´‡πâ‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô</p>
        </div>
        <button class="btn-gold" onclick="showPage('p1')">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÇ‡∏Ç‡∏ô ‚Üí</button>
    </section>

    <section id="p1" class="page" style="padding: 2rem;">
        <h2 style="text-align: center; color: var(--gold);">‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÇ‡∏Ç‡∏ô‡πÑ‡∏ó‡∏¢</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
            <div class="card"><h3>üé≠ ‡∏´‡∏±‡∏ß‡πÇ‡∏Ç‡∏ô</h3><p>‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ö‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÅ‡∏•‡∏∞‡∏ê‡∏≤‡∏ô‡∏∞</p></div>
            <div class="card"><h3>üëó ‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏¢</h3><p>‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ì‡∏µ‡∏ï‡∏®‡∏¥‡∏•‡∏õ‡πå ‡∏õ‡∏±‡∏Å‡∏™‡∏∞‡∏î‡∏∂‡∏á‡∏Å‡∏£‡∏∂‡∏á‡πÑ‡∏´‡∏°</p></div>
            <div class="card"><h3>üó£Ô∏è ‡∏Å‡∏≤‡∏£‡∏û‡∏≤‡∏Å‡∏¢‡πå</h3><p>‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏≤‡∏Å‡∏¢‡πå‡πÄ‡∏à‡∏£‡∏à‡∏≤</p></div>
        </div>
    </section>

    <section id="p2" class="page" style="text-align: center;">
        <h2 style="color: var(--gold);">AI Design Studio</h2>
        <div class="card">
            <p>‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏´‡∏±‡∏ß‡πÇ‡∏Ç‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì AI ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°</p>
            <button class="btn-gold">AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö</button>
        </div>
    </section>

    <section id="p3" class="page" style="text-align: center;">
        <h2 style="color: var(--gold);">Sustainable Challenge</h2>
        <div class="card">
            <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏´‡∏±‡∏ß‡πÇ‡∏Ç‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ç‡∏¢‡∏∞ (Zero Waste)</p>
            <div style="display: flex; justify-content: center; gap: 10px;">
                <button class="btn-gold" style="background: green; color: white;">‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ (A)</button>
                <button class="btn-gold" style="background: orange; color: white;">‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© (B)</button>
            </div>
        </div>
    </section>

    <section id="p4" class="page" style="text-align: center;">
        <h2 style="color: var(--gold);">AR Experience</h2>
        <p>‡∏™‡∏ß‡∏°‡∏´‡∏±‡∏ß‡πÇ‡∏Ç‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á ‡πÅ‡∏•‡∏∞‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏á‡∏™‡∏ö‡∏π‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥</p>
        <button class="btn-gold" onclick="openAR()">‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á WebAR</button>
        <button class="btn-gold" onclick="loadBubbleWall()">‡∏î‡∏π‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Bubble Wall)</button>
    </section>

    <div id="bubbleWallOverlay" class="bubble-wall-bg">
        <div id="bubble-container"></div>
        <div style="position: absolute; bottom: 20px; width: 100%; text-align: center;">
            <button class="btn-gold" onclick="hideBubbleWall()">‡∏Å‡∏•‡∏±‡∏ö</button>
        </div>
    </div>

    <script>
        const GAS_URL = "https://script.google.com/macros/s/AKfycbzkfOo6lhKc_5no88YZgVtgtGRD09cR8JrDPEfYRQ0vaMYR7hNNRkZQIk0aaW_HyfhM/exec";

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0,0);
        }

        // --- ‡∏£‡∏∞‡∏ö‡∏ö Bubble Wall ---
        async function loadBubbleWall() {
            document.getElementById('bubbleWallOverlay').style.display = 'block';
            try {
                const response = await fetch(GAS_URL); // ‡∏î‡∏∂‡∏á ID ‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å Google Drive
                const fileIds = await response.json();
                renderBubbles(fileIds);
                requestAnimationFrame(animateBubbles); // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ö‡∏µ‡∏ö‡∏ï‡∏±‡∏ß
            } catch (e) { alert("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û..."); }
        }

        function hideBubbleWall() {
            document.getElementById('bubbleWallOverlay').style.display = 'none';
        }

        function renderBubbles(ids) {
            const container = document.getElementById('bubble-container');
            container.innerHTML = '';
            ids.forEach(id => {
                const b = document.createElement('div');
                b.className = 'bubble';
                const size = 70 + Math.random() * 50;
                b.style.width = b.style.height = `${size}px`;
                b.dataset.x = Math.random() * window.innerWidth;
                b.dataset.y = Math.random() * window.innerHeight;
                // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å Drive
                b.innerHTML = `<img src="https://lh3.googleusercontent.com/d/${id}">`;
                container.appendChild(b);
            });
        }

        function animateBubbles() {
            const bubbles = document.querySelectorAll('.bubble');
            const cx = window.innerWidth / 2;
            const cy = window.innerHeight / 2;

            bubbles.forEach((b1, i) => {
                let x = parseFloat(b1.dataset.x);
                let y = parseFloat(b1.dataset.y);

                // ‡πÅ‡∏£‡∏á‡∏ö‡∏µ‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏≤‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á
                x += (cx - x) * 0.01;
                y += (cy - y) * 0.01;

                // ‡∏Å‡∏≤‡∏£‡∏ä‡∏ô‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ö‡∏Å‡∏±‡∏ô
                bubbles.forEach((b2, j) => {
                    if (i === j) return;
                    let dx = x - parseFloat(b2.dataset.x);
                    let dy = y - parseFloat(b2.dataset.y);
                    let dist = Math.sqrt(dx*dx + dy*dy);
                    let min = (parseFloat(b1.style.width) + parseFloat(b2.style.width)) / 2 + 10;
                    if (dist < min) {
                        x += dx * 0.05; y += dy * 0.05;
                    }
                });

                b1.dataset.x = x; b1.dataset.y = y;
                b1.style.left = `${x - parseFloat(b1.style.width)/2}px`;
                b1.style.top = `${y - parseFloat(b1.style.height)/2}px`;
            });
            if(document.getElementById('bubbleWallOverlay').style.display === 'block') {
                requestAnimationFrame(animateBubbles);
            }
        }

        function openAR() { alert("‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏•‡πâ‡∏≠‡∏á..."); }
    </script>
</body>
</html>
